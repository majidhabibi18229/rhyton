سلام یک افزونه برای کار در محیط ورد پرس می خوام که کدش رو با پی اچ پی برام بنویسی
این افزونه نباید وابستگی به  سایر افزونه ها و کتابخانه ها داشته باشه و کاملا مستقل طراحی بشه به نحوی که کاربر فقط  برای اجرا نیاز به همین کد داشته باشه و نیاز نباشه چیزی رو نصب کنه
اسم این افزونه سری ساخت هست
طراح مجید حبیبی
ورژن 1
-----------
اولین گام شماره استخراج و تولید کد سری ساخت هست
1-سریال ساخت به باید در بخش مدیریت ایجاد بشه و درون کمبو باکس صفحه ورود اطلاعات جایگزاری بشه سریالهای "MA"AS"MS"ETC" به صورت پیش فرض در این کمبو باکس قرار بگیره و در صورتی که مدیر سیستم تمایل داشت سریال ساخت دیگری استفاده کنه بتونه در بخش مدیریت تغریف کنه
2-سال ساخت که  در بخش مدیریت قابل تغریف باشه فعلا به صورت پیش فرض 1404 رو در رکورد قرار بده تا اگر بعدا مدیریت خواست سال جدیدی اضافه کنه  بتونه در بخش مدیریت اضافه کنه
3-روز تولید که روزهای ماه از 1 تا 31 در کمبو باکس قرار بگیره
4-ماه ساخت که از یک تا 12 در کمبو باکس قرار بگیرده 
5- نوبت تولید جهار عدد "0812" و "1216و"1624و"2408 "قرار داشته باشه
* فرمول تولید سری ساخت به شرح زیر است که از چپ به راست نوشته می شود  و این کد به عنوان عنضر اصلی در فیلترینگ برای تولید گزارشات استفاده خواهد شد
سریال ساخت+سال ساخت+ماه تولید+روز تولید+نوبیت تولید
حاصل این فرمول را سری ساخت می نامیم
-----------------------------------------------------
بخش دوم شرح تولید
نیروی کار دخیل در تولید بک کمبو باکس که از به دو بخش "سمت" و " نام و نام خانوادگی" تقسینم ندی می گردد که طریق بخش مدیریت میتوان نیروی انسانی دخیل در تولید را به سمت وی تغریف کرد به عنوان پیش فرض سمت "مدیر فنی" را به نام "سعید گل بن"  قرار بده تا بعدا مدیر بتواند از بخش مدیریت افراد باسمت را تعریف نماید
با توجه به آن که تعداد دخیل در تولید می تواند بیشتر از یک نفر باشد در صفحه ورود اطلاعات طوری کد بنویس که بتوان رکورد های بیشتر را فراخوانی کرد هر سری ساخت می تواند تا 25 نیروی انسانی با سمت مشخص اضافه کند
---------------------------------------
ماشین آلات به کار رفته در تولید
در بخش مدیریت امکان اضافه کردن ماشین آلات وجود دارد و موارد زیر را به عنوان پیش فرض ثبت کن
ماشین دوخت سوپاپ
ماشین دوخت دستی
ماشین دوخت اتوماتیک
شرینگ پک
پرکن پودری
پرکن گرانول
بالابر اتوماتیک
بسته بندی ساشه
آسیاب قهوه کوچک
آسیاب قهوه سریع
خط تولید کپسول قهوه
با توجه به آن که تعداد ماشین آلات دخیل در تولید می تواند بیشتر از یک دستگاه  باشد در صفحه ورود اطلاعات طوری کد بنویس که بتوان رکورد های بیشتر را فراخوانی کرد هر سری ساخت می تواند تا 25 نوع ماشین آلات محتلف را اضافه کند

------------------------------------------------------------
فرایند تولید مجموعه  اقداماتی که انجام می شود را فرایند تولید می نامیم
این فرایندهای در بخش مدیریت قابل تغریف هستند و با توجه به آن که هر محصول برای تولید می تواند جندین فرایند را در پی داشته باشد امکان  انتخاب چندین نوع فرایند وجود داشته باشد
فرایند های پیش فرض که باید در کمبو باکس ثبت شوند به شرح زیر است
توزین و کنترل کیفیت
پرکنی کپسول آلومینیومی
پرکنی پاکت و دوخت
آسیاب قهوهجدا سازی و انتخاب مواد اولیه 
بسته بندی اولیه
بسته بندی ثانویه
-------------------------------------------------------
مواد اولیه یکی از ارکان تولید است که چند پارامتر مهم دارد
واحد اندازه گیری
گرم
کیلوگرم
عدد
حلقه
رول
که در زمان انتخاب مواد اولیه باید یک کمبوباکس برای انخاب واحد اندازه گیری آن وجود داشته باشد و روبروی آن مقدار فقط به صورت عدد وارد شود
مبحث بعدی نام موارد اولیه است که دربخش مدیریت قابلیت حذف و اضافه باید داشته باشد و به صورت پیش فرض مواد اولیه زیر را وارد کن 
قهوه فوری گرانوله گلد
کاپوچینو آماده
دو در یک آماده
کافی میکس آماده
دانه قهوه رست شده
در بخش مدیریت باید بخشی وجود داشته باشد تا قیمت خرید ماده اولیه توسط مدیریت ثبت گردد و هر بار این قیمت نیاز به تغییر داشت امکان رویت سوابق قیمت آن ماده وجود داشته باشد و در زمان ثبت منبع خرید و تاریخ خرید نیز قید گردد
----------------------------------------------------
ملزومات بسته بندی 
در این بخش مواردی که در بسته بندی اولیه و ثانویه محصول به کار رفته است توسط کاربر ثبت می گردد  و در بخش مدیریت نیز قابلیت حذف و اضافه آن وجود داشته باشد و توسط مدیریت می بایست قیمت خرید هر ملزومات قید گردد تا بتوان به همراه مبالغ اعلام شده در سایر بخش ها قیمت تمام شده هر سری ساخت را بدست آورد
به صورت پیش فرض موارد زیر را ثبت کن 
کپسول آلومینیومی
شرینگ
سلفون
مادر کارتن
دختر کارتن
پاکت
جار شیشه ای
واحد اندازه گیری برای ثبت مقدار 

گرم
کیلوگرم
عدد
حلقه
رول

 این مورد را در نظر بگیر که توجه به آن که تعداد موارد دخیل در بسته بندی محصول می تواند بیشتر از یک آیتم  باشد در صفحه ورود اطلاعات طوری کد بنویس که بتوان رکورد های بیشتر را فراخوانی کرد هر سری ساخت می تواند تا 25 آیتم بسته بندی را اضافه کند

---------------------------------------------------------
بخش تولیدات کاربر مواردی که در این سری ساخت تولید شده را ثبت می نماید و این موارد می تواند  توسط مدیریت حذف و اضافه شود که شامل محصول و واحد اندازه گیری است
واحد اندازه گیزی توسط مدیر ثبت و یا حذف می شود ولی به صورت پیش فرض این موارد را ثبت کن
بسته <تعداد درون بسته
جار شیشه ای<وزن و ظرفیت شیشه
قوطی مقوایی کپسول<تعداد داخل کپسول
پاکت<وزن درون پاکت
همانطور که می بینی هر بسته بندی باید میزان جزء آن هم ثبت گردد تا بتوانیم قیمت تمام شده هر محصول تولید شده را استخراج کنیم 

نوع محصول از طریق مدیریت قابلیت تغریف و حذف دارد ولی موارد زیر را به صورت پیش فرض ثبت کن

قهوه گلد
کاپوچینو
ساشه دو در یک
ساشه سه در یک
دانه قهوه رست شده
قهوه آسیاب شده
کپسول قهوه آلومینیومی
-------------------------------------------------------------
در هنگام تولید بخشی از مواد اولیه و بسته بندی ممکن است از بین بروند و قابل مصرف نباشند بنابر این باید کاربر بتواند با انتخاب مواد اولیه و یا ملزومات بسته بندی مواردی که از فرایند تولید خارج شده را ثبت نماید ولی این ضایعات در محاسبه قیمت تمام شده محاسبه می گردند
---------------------------------------------------------
بخش را به عنوان بخش اقدامات عمومی فرایند تولید در نظر بگیر که در بخش مدیریت توسط مدیر امکان حذف و اضافه نیز داشته باشند و به صورت چک باکس  علامت گزاری گردند تا در ارائه گزارش نهایی اقدامات نهایی نمایش داده شود 
اقدامات پیش فرض به شرح زیر است:
شمارش ضایعات و دور ریز
شمارش محصولات تولیدی
نظافت محیط انجام شد
نظافت دستگاه انجام شد
--------------------------------------------------------
گزارشات
1- تهیه گزارش شرح تولید  که شامل تمامی اطلاعات وارد شده است
2-قیمت تمام شده که شامل قیمت هر بخش بر اساس واحد اندازه گیری ثبت شده است
3-گزارش ضایعات که به تنهایی میزان ضایعات را استخراج و نسبت ضایعات به میزان موارد اولیه یا ملزومات بسته بندی به درصد اعلام می کند
شاخص تمام گزارشات کد سری ساخت می باشد که فیلتر در همه موارد با انتخاب از کمبو باکس می باشد
با انتخاب آین کد کلیه اطلاعات فراخوانی و نمایش داده شود و یا چاپ گردد
-----------------------------------------
امکانات:
گزارشات قابلیت چاپ و ارسال به ایمیل را داشته باشند و ایمیلهای دریافت کننده گزارشات توسط مدیر سیستم تغریف می گردد و برای هر ایمیل دسترسی به گزارشات باید ایجاد گردد
در چاپ گزارشات صرفا جداول استخراج شده و لیبل ها و المانهای افزونه چاپ گردد و سایر بخشهای صفحات ورد پرس جاپ نگردد
در بالا-وسط همه گزارشات یک لیبل با نام گزارش ایجاد شود و بالای آن یک لوگو که امکان آپ لود آن در بخش مدیریت وجود داشته باشد ایجاد گردد .
دو شرت کد ایجاد شود یکی برای رویت گزارشات و یکی برای ثبت اطلاعات
کاربران در شرت کد و افزونه  باید توسط مدیریت تعریف گردند و هر کاربری که بتواند ثبت انجام دهد یا گزارش را رویت کند می بایست قبلا توسط مدیریت با نام کاربری و گذر واژه ثبت گردند و نام و نام خانوادگی و سمت ایشان از بخش نیروی انسانی انتخاب گردد.
در بخش گزارش قیمت تمام شده دقت کن باید اطلاعات از قیمت هر ماده اولیه یا ملزومات بسته بندی استخراج گردد و حمع آن را به تفصیل داشته باشیم
مثلا برای تولید یک ساشه کاپوچینو در مجموع چقدر ماده اولیه و ملزومات بسته بندی مصرف شده(بر اساس واحد اندازه گیری قید شده) وقیمت هر المان جقدر است و جمع هر واحد وکل جقدر شده است

-------------------------------------------------------------
خب مواردی که باید توسعه پیدا بکنه رو بررسی کن و ورژن جدید رو ایجاد کن
بخش امنیتی:
1-وقتی افزونه فعال و غیر فعال می شود کلیه اطلاعات قبلی پاک  نشود و این باعث از بین نرفتن اطلاعات میشه که این فرانید باید ایجاد شود و وقتی افزونه بروز می شود با بروز رسانی می شود وقتی اطلاعات مربوط به افزونه در ورد پرس وجود دارد این اطلاعات حفظ شود
2-امکان تغییر رمز عبور برای کاربران  توسط مدیریت 
3-تهیه و دانلود بک آپ و دانلود اطلاعات نسخه پشتیبان که این اطلاعات باید به دو صورت باشد یکی خروجی اکسل و یکی دانلود فایلهای افزونه و دیتا بیس
------------------------
ورود اطلاعات 
1-در بخش ورود اطلاعات باید برای بخش صایعات نیز  واحد اندازه گیری در نظر گرفت  تا مشخص شود به چه میزان ضایعات داشته ایم
2- درکلیه فیلدهایی که عدد ثبت می گردد هزارگان در نظر گرفته شود(سه رقم ،سه رقم جدا شود) و فقط اعداد صحیح در نظر گرفته شود و اعشار یا واحد ریز ریالی نخواهیم داشت و کلیه اعداد اعداد صحیح که سه رقم سه رقم بر اساس هزارگان ایجاد می شود و این موضوع  کاربردش در صفحه گزارشها خواهد بود
3-پرکردن کلیه فیلدها در ورود اطلاعات ضروری است و فیلد خالی نباید وجود داشته باشد و در زمان فشردن دکمه ثبت همه فیلدها باید تکمیل شده باشد
4- برای بخش محصولات در ورود اطلاعات یک فیلد توضیحات ایجاد کن که کاربر امکان ثبت توضیحات داشته باشد وبه صورت پیش فرض متن"اطلاعات تکمیلی را درج کنید" در نظر گرفته شود
5- در بخش محصولات یک فیلد تعداد موجود دربسته اضافه شود که توسط کاربر عدد آن ثبت می شود
--------------------------
گزارشات:
1- درکلیه فیلدهایی که عدد ثبت می گردد هزارگان در نظر گرفته شود(سه رقم ،سه رقم جدا شود) و فقط اعداد صحیح در نظر گرفته شود و اعشار یا واحد ریز ریالی نخواهیم داشت و کلیه اعداد اعداد صحیح که سه رقم سه رقم بر اساس هزارگان ایجاد می شود و این موضوع  کاربردش در صفحه گزارشها خواهد بود

2-دو تایپ گزارش دیگر هم نیار داریم که یکی بر اساس محصول(انتخاب محصول به جای کد سری ساخت) ویکی انتخاب بازه تاریخی(بین دو تاریخ انتخابی) 
3-چاپ گزارش فعال باشد ، پیشنهاد می کنم بعد نمایش گزارش دکمه چاپ در نمایش قرار گیردو ارکان جداول نمایش داده شده چاپ شود و سایر عناضر که مرتبط با افزونه ما نیست چاپ نشود 
4-در آخرین بررسی ارسال ایمیل صورت می گیرد ولی حداول ارسال نمیشود،و صرفا کلیه ارکان به صورت بهم ریخته ایمیل می گردد و پیشنهاد می گردد ارکان گزارش به همان صورت که نمایش داده می شود به همراه لوگو و نام شرکت ارسال گردد و زمانی که دکمه ارسال زده می شود گزارش برای تمام ایمیل های ثبت شده ارسال گردد
5-در بخش پایانی  جمع کل هزینه که  هزینه های بسته بندی و مواد اولیه را  حمع می بندد(در حال حاضر فقط جمع ملزومات بسته بندی را می آورد و باید حمع تک تک رکورد ها ی مواد اولیه  با نک نک رکوردهای ملزوات بسته بندی حمع می گردد)
قبل از جمع کل باید حمع ملزومات بسته بندی را اعلام کنیم و بعد جمع ملزومات مواد اولیه را  و در روبروی هریک نسبت از کل هزینه به درصد آورده شود
یک خط کشیده و زیر حمع کل که کاملا مستقل از این بخش است  باید قیمت هر بسته و یک بخش هم قیمت تعداد داخل بسته ها آورده شود،در این خصوص توضیح می دهم که شفاف شود(بعد از این که جمع کل یعنی مجموع هزینه های مواد اولیه و ملزومات  بسته بندی را بدست آوردیم باید ببینیم هر بسته از محصولات تولید شده چقدر برایشان هزینه شده است(جمع کل تقسیم بر تعداد بسته ها) و حالا باید ببینیم هر واحد جزء چقدر هزینه داشته است بند 5 که در بخش ورود اطلاعات توضیح دادم در این فرایند نقش دارد برای بدست آوردن آن به این فرمول دقت کن
الف=جمع کل
ب=تعداد بسته های تولید شده
ج=تعداد موجود در هر بسته
میزان هزینه هر واحد تولید شده=ب*ج/الف
6-برای تولید گزارشات همیشه یک گزینه داشته باش به عنوان "تمامی سری ساختها" باید داشته باشیم که بدانیم در کل عملیاتها چگونه بوده و چقدر هزینه و محصول تولید شده است
----------------------------------------
افزودن بخش انبار:
این بخش دارای منوی مستقل باید باشد ولی از اطلاعات بخشهای قبلی اسفاده می کند
وقتی محصولات تولید شده ثبت می گردد براساس واحد و تعداد و واحد جزء ثبت می گردد یعنی این محصولات در انبار کارخانه قرار خواهند گرفت و باید بدانیم چه تعداد از این محصولات در انبار وجود دارد و چه تعداد محصول از انبار به کجا و به چه علتی خارج می شود که به شرح آن می پردازیم
بخش اول :
موجودی انبار
باید در بخش انبار تشریخی از کالاهای تولید و انبار شده داشته باشیم برای این منظور در یک بخش باید هر محصول تولید شده یک کد داشته باشد که براساس آن شناسایی می گردد که در بخش مدیریت هنگام ثبت محصولات باید ثبت و معرفی شود(در بخش مدیریت این فیلد را به محصولات اضافه کن) و پس از هر بار تولید آن محصول به جمع موجود در انبار ان محصول اضافه می شود و گزارش موجودی کالا دو حالت دارد که یکی براساس کد محصول است ویکی بر اساس کلیه محصولات موجود در انبار که پس از انتخاب مشخص می شود که هر محصول براساس کدام کد سری ساخت به چه تعداد تولید شده است و اساس اضافه شدن به موجودی انبار تکمیل و ثبت سری ساخت است یعنی هر محصولی که تولید هایی آن ثبت می گردد به جمع موجود در انبار اضافه می شود و این گزارش نیز چاپ و یا برای ایمیل هایی که ثبت کرده ایم ارسال می گردد.
بخش دوم:
خروچ از انبار :
در این بخش محصولات تولید شده ای که از انبار خارج می شوند شنایسایی می گردد
علت خروج ها به  صورت پیش فرض  این موارد رو ثبت کن و امکان ثبت علت خروچ های جدید  برای مدیریت وجود داشته باشد
انبار روناد
انبار دیجی کالا
دفتر تهران
مصرف پذیرایی در دفتر تهران
مصرف پذیرایی در دفتر کارخانه
فروش مستقیم
فروش اینترنتی
مصرف شخصی
و باید ثبت شود این خروج از انبار توسط چه کسی ثبت شده است که نام  این فرد را می توانیم از نیزوی انسانی ثبت شده قابل انتخاب است و فیلد تاریخ و ساعت به صورت خودکار ثبت می گردد
هر زمان خروجی ثبت شد باید به همان میزان از محصولی که خروجی ثبت شده باید از موجودی انبار کسر گردد   در گزارشی که ایجاد می گردد باید مشخص باشد در جه تاریخی و توسط چه کسی به کدام مقصد خروجی  ارسال شده است و تمامی وموارد در گزارشی به نام خروج از انبار  قابل رویت است(شرت کد مجزا دارد) .
برگشت به انبار
به دلایلی محصولات می توانند به انبار برگردند
مرجوعی
برگشت از فروش
خرید مجدد محصول
یا دلایلی که در بخش مدیریت می توان این دلایل را اضافه کرد
کاربر باید بتواند محصول را انتخاب (کد محصول کد فراخوانی در تمام گزارشات خواهد بود و کاربر با نام محصول آن را از فهرست انتخاب می کند) تعداد واحد محصول را که انبار برگشته را ثبت می کند و کالای برگشت شده به موجودی انبار اضافه می گردد و در هنگام ثبت فرد ثبت کننده  و تاریخ ثبت نیز باید ثبت گردد و کلیه این موارد در گزارش مربوط(دارای شرت کد جدا) به برگشت به انبار نمایش داده شود و امکان چاپ و ارسال به ایمیلهای درج شده را داشته باشد

در هر کدام از گزارشات جدید نیز قابلیت گزارش گیری برا اساس محدوده تاریخی،نیروی انسانی اقدام کننده،محصول و علت خروج از انبار و علت برگشت به انبار را داشته باشد
این تغییرات را پیاده سازی کن تا باهم ایرادات احتمالی را برطرف کنیم 
طوری کد نویسی کن که هنچنان کد به صورت یکپارچه باشد و نیازی به سایر نداشته باشد و 
-------------------------------------------------------------------------------
بررسی سری ساخت
ثبت انجام میشود ولی به جیسون
{"success":true,"data":"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0628\u0627 \u0633\u0631\u06cc \u0633\u0627\u062e\u062a MA140412190812 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062b\u0628\u062a \u0634\u062f."}
در صورتیکه  تیک pretty print زده شود هم  به صورت زیر نمایش داده می شود
{
  "success": true,
  "data": "اطلاعات با سری ساخت MA140412190812 با موفقیت ثبت شد."
}

که می بایست به صورت" اطلاعات با سری ساخت _______ ثبت و به واحد مربوطه ارسال گردید"
__________________________
_________________________________________________________________________
پیشنهاد می گردد پس از نمایش امکان چاپ و یا ارسال فراهم گردد تا دسترسی راجتتری داشته باشیم
------------------------------
------------------------------------
در بخش خروچ از انبار و برگشت به انبار  علت در دو کمبو باکس جداگانه باید ایجاد شود که با انتخاب نوع باید علت های مربوط به آن ارائه شود علت ها در ورژن های قبلی را بهت گفتم و ایجاد کرده بودی و در صفحه سری ساخت باید این امکان فراهم گردد تا علت ها را حذف و اضافه کرد
-----------------------------------
در صفحه ضایعات که فهرست ضایعات رویت می گردد و گزارش خروجی که نمایش داده می شود یا به ایمیل ارسال میگردد باید دارای واحد اندازه گیری باشد جمع هر یک هم باید بر اساس همان واحد اندازه گیزی به صورت تفکیکی باشد
----------------------------------------------------------
در قیمت مصرف کننده تا جایی که قابل دسترس است(دارای خطا هستیم که باید رفع شود) عملکرد صحیح است ولی با توجه به آن که در هر سری ساخت قیمت میتواند متفاوت باشد و قیمت ها نیز می تواند تغییر کند بهتر است وقتی محصول انتخاب می شود سری ساختهایی که در از محصول انتخاب شده موجود است به ترتیب جدید به قدیم نمایش داده شود و پس از انتخاب  سری ساخت توسط کاربر قیمت تمام شده بر اساس آن استخراج و نمایش داده شود
فرامنوش نشود در صورتی که محصول انتخاب شده در سری ساخت انتخاب شده وجود نداشته باشد به کاربر اعلام گردد "کالای انتخابی در سری ساخت انتخابی وجود ندارد"
پس از اعمال تغییرات و رفع خطا این بخش را مجدد بررسی می کنیم.
در بخش تنظیمات باید یک فیلد برای مالیات در نظر بگیر تا بتوان آن را تغییر و ذخیره کرد
در محاسبات فعلی تو مالیات را حساب نمی کنی ولی باید میزان معین شده تحت عنوان "مالیات بر ارزش افزوده" به قیمت مصرف کننده اضافه شود و پس از آن یک ردیف اضافه شود و نوشته شود قیمت مصرف کننده به همراه مالیات بر ارزش افزوده
در حال حاضر محاسبات تو کمی ایراد دارد وقتی ارزش جزء داریم آن را هم جمع می کنی یکبار دیگر تشریح می کنم
درون هر بسته ممکن است 10 واحد باشد 
اوقتی که محصول تولید شد و قیمت تمام شده استخراج شد قیمت بسته مهم است برای محاسبه قیمت تمام شده بنا بر این باید قیمت یک بسته را که شامل همه موارد است در نظر بگیریم
یک مثال می زنیم
مثلا ما یک محصول داریم به نام آلفا آلفا به صورت بسته های ده تایی فروش می رسد برای تولید آن اقلام زیر استفاده می شود
10 عدد ساشه که هر یک 1000 ریال قیمت دارد
در هر ساشه 23 گرم کافی میکس دارم که هر گرم 1 ریال ارزش دارد و هر ساشه 23 ریال و ده ساشه  معادل 230 ریال هزینه دارد
یک کارتن دارد 100 ریال
بنابر این جمع هزینه 
قیمت تمام شده(10000+230+100)=10330 ریال
قیمت ناخالص حال 25 درصد سود کارخانه به آن اضافه می شود یعنی 12912
قیمت تولید حال 25 درصد سود پخش به آن اضافه می شود یعنی 16141
قیمت مصرف کننده حال 25 درصد سود خرده فروشی(که تو در تنظیمات مصرف کننده نوشتی و باید اصلاح کنی) به آن اضافه می کنیم یعنی 20176
قیمت مصرف کننده با مالیات بر اززش افزوده به این مبلغ ده درصد مالیات بر ارزش افزوده اضافه می کنیم و قیمت مصرف کننده ما می شود 22193

